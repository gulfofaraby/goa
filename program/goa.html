<!DOCTYPE html>
<html>    
<head>
  <style>
    html{height:100%}
    body{color:white; background-color:black; font-size:18px; font-family:"Courier New"; min-height:100%; overflow:auto; display:flex; align-items:center; justify-content:center;}
    .container{position:relative; float:left; width:800px; margin:0px; padding:0px; display:flex; align-items:center; justify-content:center;}
    .container2{position:relative; float:left; height:400px; margin:0px; padding:0px; display:flex; align-items:center; justify-content:center;}
    .text-block {position:absolute; background:rgb(0,0,0); background:rgba(0,0,0,0.7); color: white; padding-left:15px; padding-right:15px; margin:0px;}
  </style>
</head>
<body>
</body>
<script>
  const picPath = '../docs/img_goa/';
  var step;  
  var picsB = [];
  for (step = 0; step < 2; step++) 
    picsB.push(picPath.concat('b', step, '.jpg'));
  var picsL = [];
  for (step = 0; step < 24; step++) 
    picsL.push(picPath.concat('l', step, '.jpg'));
  var picsP = [];
  for (step = 0; step < 24; step++) 
    picsP.push(picPath.concat('p', step, '.jpg'));
  var picsS = [];
//  for (step = 0; step < 8; step++) 
//    picsS.push(picPath.concat('s', step, '.jpg'));
  var picsV = [];
  for (step = 0; step < 11; step++) 
    picsV.push(picPath.concat('v', step, '.jpg'));
  const picsA = picsB.concat(picsL, picsP, picsS, picsV);

  
  var block1Content = [
    {bg:'black0.jpg', text:'simply focus and relax'},
    {bg:'spiral1.gif', text:'simply focus and relax'},
    {},
    {text:'just breathe in'},
    {},
    {text:'and breathe out'},
    {},
    {text:' breathe in'},
    {},
    {text:'and breathe out'},
    {},
    {text:'breathe in'},
    {text:'and focus'},
    {},
    {text:'and breathe out'},
    {text:'and relax'},
    {},
    {text:'simply breathe'},
    {},
    {text:'and focus'},
    {},
    {text:'       as you relax       ', dur: 1000},
    {text:'       as you focus       ', dur: 333},
    {text:'       as you relax deeper', dur: 667},
    {dur: 10000},
    {text:'relax. breathe. focus.'},
    {},
    {text:'  it\'s  good  to  relax  ', dur: 800},
    {text:'        good      relax  ', dur: 300},
    {text:'      a good girl relaxes', dur: 500},
    {text:'  it\'s  good  to  relax  ', dur: 500},
    {},
    {text:'breathe. focus. relax.'},
    {},
    {text:'         it\'s  relaxing  to  focus         '},
    {text:'               relax         focus         ', dur: 150},
    {text:'  good girl,   relax   and   focus         ', dur: 400},
    {text:'  good girl    relax         focus         ', dur: 150},
    {text:'a good girl is relaxed  and  focused       ', dur: 400},
    {text:'         it\'s  relaxing  to  focus         ', dur: 600},
    {dur: 5000},
    {text:'           it\'s  good  to  focus  and  relax           ', dur: 1450},
    {text:'                 good girl focus  and  relax           ', dur: 400},
    {text:'                 good girl                             ', dur: 150},
    {text:'you want to be a good girl                             ', dur: 400},
    {text:'                                                       ', dur: 50},
    {text:'               you want to be a good girl              ', dur: 150},
    {dur: 1500},
    {text:' breathe       focus       relax  '},
    {text:'a good girl is focused and relaxed', dur: 300},
    {text:' breathe       focus       relax  ', dur: 200},
    {text:'a good girl is focused and relaxed', dur: 1800},
    {text:' breathe       focus       relax  ', dur: 200},
    {text:'a good girl is focused and relaxed', dur: 500},
    {text:'  good girl                       ', dur: 100},
    {text:'                                  ', dur: 100},
    {text:'  good girl                       ', dur: 700},
    {text:'                                  ', dur: 100},
    {},
    {text:'you want to be a good girl', dur: 600},
    {text:'                          ', dur: 100},
    {text:'you want to be a good girl', dur: 200},
    {bg: 'v3.jpg', text:'you want to be a good girl', dur: 150},
    {bg: 'p18_c.jpg', text:'you want to be a good girl', dur: 150},
    {bg: 'p21.jpg', text:'you want to be a good girl', dur: 150},
    {bg: 'l11_c.jpg', text:'you want to be a good girl', dur: 150},
    {bg:'spiral1.gif', text:'you want to be a good girl', dur: 200},
    {dur: 3000},
    {text:'you\'d like to relax much deeper', dur: 1200},
    {bg: 'p18_c.jpg', text:'you\'d like to relax much deeper', dur: 100},
    {bg: 'spiral1.gif', text:'you\'d like to relax much deeper', dur: 400},
    {dur: 3000},
    {text: 'the next exercise'},
    {text: 'will help you relax much deeper'},
    {dur: 3000},
    {text: 'breathe and watch closely'},
    {},
    {text: 'simply breathe                              '},
    {text: '               and focus                    '},
    {text: '                         and watch          '},
    {text: '                                   and relax'},
    {},
    {bg: 'black0.jpg', dur: 1000}
  ];
  
  var block1Frames = [];
  var block1BG = 'black0.jpg';
  block1Content.forEach(function(block1Cont) {
    if (block1Cont.bg != null) {
      block1BG = block1Cont.bg;
    }
    if (block1Cont.text == null && block1Cont.dur == null) {
      block1Frames.push({stimulus: '<div class="container"><img src="../docs/img_goa/' + block1BG + '" style="width:100%;"></div>'});
    } else if (block1Cont.text == null) {
      block1Frames.push({stimulus: '<div class="container"><img src="../docs/img_goa/' + block1BG + '" style="width:100%;"></div>', duration: block1Cont.dur});
    } else if (block1Cont.dur == null) {
      block1Frames.push({stimulus: '<div class="container"><img src="../docs/img_goa/' + block1BG + '" style="width:100%;"><div class="text-block"><p><pre>' + block1Cont.text + '</pre></p></div></div>'});
    } else {
      block1Frames.push({stimulus: '<div class="container"><img src="../docs/img_goa/' + block1BG + '" style="width:100%;"><div class="text-block"><p><pre>' + block1Cont.text + '</pre></p></div></div>', duration: block1Cont.dur});
    }
  });

  var block2Content = [
    {frame: 7, text: 'it\'s relaxing to spread your legs', dur: 600},
    {frame: 15, text: 'a good girl spreads her legs', dur: 600},
    {frame: 20, text: 'it\'s relaxing  to  spread your legs', dur: 600},
    {frame: 22, text: 'it feels good  to  spread your legs', dur: 600},
    {frame: 27, text: 'a good girl has her legs spread', dur: 600},
    {frame: 34, text: 'it\'s good  to  spread your legs', dur: 600},
    {frame: 38, text: 'a good girl feels so good with her legs spread', dur: 600},
    {frame: 40, text: 'so relaxing to spread your legs', dur: 600},
    {frame: 50, text: 'with your legs spread, you are', dur: 600},
    {frame: 50, text: 'ready', dur: 600},
    {frame: 52, text: 'to', dur: 600},
    {frame: 53, text: 'receive', dur: 600},
    {frame: 59, text: 'breathe focus relax spread legs', dur: 600}
  ];
  var block2Frames = [];
  var block2BG = picsL[Math.floor(Math.random()*picsL.length)];
  var block2BG_mem1 = block2BG;
  var block2BG_mem2 = block2BG_mem1;
  step = 0;
  block2Content.forEach(function(block2Cont) {
    for (; step < block2Cont.frame; step ++) {
      block2Frames.push({stimulus: '<div class="container2"><img src="' + block2BG + '" style="width:100%;"></div>'});
      block2BG_mem2 = block2BG_mem1;
      block2BG_mem1 = block2BG;
      while (block2BG == block2BG_mem1 || block2BG == block2BG_mem2)
        block2BG = picsL[Math.floor(Math.random()*picsL.length)];
    }
    block2Frames.push({stimulus: '<div class="container"><img src="../docs/img_goa/spiral0.gif" style="width:100%;"><div class="text-block"><p><pre>' + block2Cont.text + '</pre></p></div></div>', duration: block2Cont.dur});
  });

  var duration;
  var frameCur;  
  function runFrames(frames, defaultDuration) {
    if (frames[0] != undefined) {
      frameCur = frames.shift();
      document.body.innerHTML = frameCur.stimulus;
      if (frameCur.duration == undefined) {
        duration = defaultDuration;
      } else {
        duration = frameCur.duration;
      }
      setTimeout(runFrames, duration, frames, defaultDuration);
    } else {
      document.body.innerHTML = '';
    }
  }

  runFrames(block2Frames, 150);

</script>
</html>
